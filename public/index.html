<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">

    <title></title>
    <meta name="description" content="">

    <!-- dependencies (jquery, handlebars and bootstrap) -->
    <script type="text/javascript" src="https://code.jquery.com/jquery-1.11.1.min.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/handlebars.js/4.0.10/handlebars.min.js"></script>
    <link type="text/css" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap.min.css" rel="stylesheet" />
    <script type="text/javascript" src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/js/bootstrap.min.js"></script>

    <link type="text/css" href="https://cdn.datatables.net/1.10.15/css/jquery.dataTables.min.css" rel="stylesheet" />
    <script type="text/javascript" src="https://cdn.datatables.net/1.10.15/js/jquery.dataTables.min.js"></script>

    <script type="text/javascript" src="js/lib/bootstrap.multiselect.js"></script>
    <!--[if lt IE 9]>
        <
        script src = "https://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv.js" >
    </script>
    <![endif]-->

    <link type="text/css" href="css/style.css" rel="stylesheet" />
    <link rel="stylesheet" href="css/jquery.fileupload.css">

</head>

<body>

    <div class="container-fluid modal universal-custom" id="universal-file-manager">
        <div class="row">
            <div class="col-md-12" style="padding:0;">


                <div class="panel-group" id="file-select-panels">
                    <div class="panel panel-default" id="file-select-container">
                        <div class="panel-heading">
                            <a class="panel-title" data-toggle="collapse" data-parent="#file-select-panels" href="#file-select-panel"><span class="glyphicon glyphicon-file"></span> Select a file</a>
                        </div>
                        <div id="file-select-panel" class="panel-collapse collapse">
                            <div class="panel-body">
                                <div class="container">
                                    <div class="row">
                                        <div class="col-sm-12">
                                            <table id="file_select_table" class="dataTable table table-striped compact display" cellspacing="0" width="100%">
                                                <thead>
                                                    <tr>
                                                        <th>Name</th>
                                                        <th>Type</th>
                                                        <th>Size</th>
                                                        <th>Added By</th>
                                                        <th>Users</th>
                                                        <th>Extension</th>
                                                        <th>Details</th>
                                                        <th>Original Name</th>
                                                        <th>Options</th>
                                                    </tr>
                                                </thead>
                                            </table>
                                        </div>
                                    </div>
                                    <div class="col-md-4 pull-right">
                                        <button id="file_select_btn_done" type="button" class="btn  btn-primary">Done</button> &nbsp;
                                        <button id="file_select_btn_cancel" type="button" class="btn btn-sm btn-link">Cancel</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>


                    <div class="panel panel-default" id="file-upload-container">
                        <div class="panel-heading"><a class="panel-title" data-toggle="collapse" data-parent="#file-select-panels" href="#file-upload-panel"><span class="glyphicon glyphicon-open"></span> Upload a File</a></div>
                        <div id="file-upload-panel" class="panel-collapse collapse">
                            <div class="panel-body">
                                <div class="container">
                                    <form role="form" class="form" onsubmit="return uploadDataForm();">
                                        <div class="row">

                                            <div class="col-sm-6">
                                                <!-- <div class="progress">
                                                    <div class="progress-bar progress-success"></div>
                                                </div> -->

                                                <h5 class="helper">File Properties</h5>
                                                <div class="form-group">
                                                    <input type="text" class="form-control" id="file_name" placeholder="Name" required />
                                                </div>
                                            </div>

                                            <div class="form-group col-sm-6">
                                                <h5 class="helper">Image</h5>


                                                <br>
                                                <!-- The fileinput-button span is used to style the file input field as button -->
                                                <span class="btn btn-success fileinput-button">
                                                    <i class="glyphicon glyphicon-plus"></i>
                                                    <span>Add files...</span>
                                                <!-- The file input field used as target for the file upload widget -->
                                                <input id="fileupload" type="file" name="files[]" multiple>
                                                </span>
                                                <br>
                                                <br>
                                                <!-- The global progress bar -->
                                                <div id="progress" class="progress">
                                                    <div class="progress-bar progress-bar-success"></div>
                                                </div>
                                                <!-- The container for the uploaded files -->
                                                <div id="files" class="files"></div>
                                                <br>


                                                <!-- <div class="upload_btss">
                                                    <span class="btn btn-default btn-file">
                                                     <span class="glyphicon  glyphicon-folder-open"></span> &nbsp; Browse <input type="file" id="file_original_name" />
                                                    </span>
                                                </div> -->
                                            </div>
                                        </div>

                                        <div class="row">
                                            <div class="col-sm-12">
                                                <!-- <h5 class="helper">File Properties</h5>
                                                <div class="form-group">
                                                    <input type="text" class="form-control" id="file_name" placeholder="Name" required />
                                                </div> -->

                                                <div class="form-group">
                                                    <!-- <input type="text" class="form-control" id="file_detail" placeholder="Description (optional)" /> -->
                                                    <textarea type="text" class="form-control" id="file_detail" placeholder="Description (optional)"></textarea>
                                                </div>

                                                <div class="form-group file-options-perms-users">
                                                    <div class="button-group">
                                                        <button type="button" class="btn btn-default btn-sm dropdown-toggle" data-toggle="dropdown"><span class="glyphicon glyphicon-user"></span> Users <span class="caret"></span></button>
                                                        <ul class="dropdown-menu">
                                                            <li><label class="small">&nbsp;<input data-value="0" type="checkbox" checked/>&nbsp;Indian River Medical Center</label></li>
                                                            <li><label class="small">&nbsp;<input data-value="1" type="checkbox" checked/>&nbsp;Public</label> <span class="glyphicon glyphicon-info-sign"></span></li>
                                                            <li><label class="small">&nbsp;<input data-value="2" type="checkbox" checked/>&nbsp;Your Patients</label></li>
                                                            <li><label class="small">&nbsp;<input data-value="3" type="checkbox" checked/>&nbsp;IRMC Patients</label></li>
                                                            <li><label class="small">&nbsp;<input data-value="4" type="checkbox"/>&nbsp;Users</label></li>
                                                        </ul>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="row">
                                            <div class="col-sm-6">

                                                <h5 class="helper">Tags</h5>

                                                <div class="form-group">


                                                    <select id="dates-field2" class="multiselect-ui form-control" multiple="multiple">
                                                                <option value="logo">logo</option>
                                                                <option value="audio">audio</option>
                                                                <option value="image">image</option>
                                                                <option value="client">client</option>
                                                                <option value="clip">clip</option>
                                                                <option value="theme">theme</option>
                                                                <option value="HD">HD</option>
                                                            </select>


                                                </div>
                                            </div>
                                        </div>

                                        <div class="checkbox file-options-perms-practice">
                                            <label><input type="checkbox" name="file_perms_practice" id="file_perms_practice" />Allow members of your group or practice to use this file when creating their pathways?</label>
                                        </div>

                                        <div class="col-sm-6" style="padding-left: 0;">
                                            <button id="file_upload_btn_cancel" type="button" class="btn btn-link">Cancel</button>
                                        </div>

                                        <div class="col-sm-6 text-right" style="padding-right: 0;">
                                            <button id="file_upload_btn_done" type="submit" class="btn btn-primary">Save</button>
                                        </div>


                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
            <!-- end of col 6 -->

            <div class="col-md-6">
            </div>

        </div>
    </div>

    <script id="table-cols-picker" type="text/html">
        <div class="col-sm-1">
            <div class=" button-group file_select_col_vis  pull-left" style="margin: 0 0 3px -10px;">
                <button type="button" class="btn btn-default btn-sm dropdown-toggle" data-toggle="dropdown"><span class="glyphicon glyphicon-cog"></span> Columns <span class="caret"> </span></button>
                <ul class="dropdown-menu">
                    <li><label class="small">&nbsp;<input data-value="0" type="checkbox" checked/>&nbsp;Name</label></li>
                    <li><label class="small">&nbsp;<input data-value="1" type="checkbox" checked/>&nbsp;Type</label></li>
                    <li><label class="small">&nbsp;<input data-value="2" type="checkbox" checked/>&nbsp;Size</label></li>
                    <li><label class="small">&nbsp;<input data-value="3" type="checkbox" checked/>&nbsp;Added By</label></li>
                    <li><label class="small">&nbsp;<input data-value="4" type="checkbox"/>&nbsp;Users</label></li>
                    <li><label class="small">&nbsp;<input data-value="5" type="checkbox"/>&nbsp;Extension</label></li>
                    <li><label class="small">&nbsp;<input data-value="6" type="checkbox"/>&nbsp;Details</label></li>
                    <li><label class="small">&nbsp;<input data-value="7" type="checkbox"/>&nbsp;Original Name</label></li>
                    <li><label class="small">&nbsp;<input data-value="8" type="checkbox"/>&nbsp;Options</label></li>
                </ul>
            </div>
        </div>
    </script>
</body>

<script type="text/javascript" src="js/FileServiceClient-bootstrap.js"></script>


<!-- The jQuery UI widget factory, can be omitted if jQuery UI is already included -->
<script src="js/lib/vendor/jquery.ui.widget.js"></script>
<!-- The Load Image plugin is included for the preview images and image resizing functionality -->
<script src="//blueimp.github.io/JavaScript-Load-Image/js/load-image.all.min.js"></script>

<!-- The basic File Upload plugin -->
<script src="js/lib/jquery.fileupload.js"></script>
<!-- The File Upload processing plugin -->
<script src="js/lib/jquery.fileupload-process.js"></script>
<!-- The File Upload image preview & resize plugin -->
<script src="js/lib/jquery.fileupload-image.js"></script>
<!-- The File Upload audio preview plugin -->
<script src="js/lib/jquery.fileupload-audio.js"></script>
<!-- The File Upload video preview plugin -->
<script src="js/lib/jquery.fileupload-video.js"></script>
<!-- The File Upload validation plugin -->
<script src="js/lib/jquery.fileupload-validate.js"></script>


<script>
    $(document).ready(function() {
        var fsClient = new FileServiceClient({
            selectMode: "single",
            uploadMode: "single",
            rootSelector: "#universal-file-manager",
            uploadSelector: "#file-upload-container",
            selectSelector: "#file-select-container",
            tags: ["client", "theme", "logo"]
        });
        fsClient.show();
        $('.multiselect-ui').multiselect({
            includeSelectAllOption: true
        });


    });

    function uploadDataForm() {

        alert(this);

    }
</script>

<script>
    /*jslint unparam: true, regexp: true */
    /*global window, $ */
    $(function() {
        'use strict';
        // Change this to the location of your server-side upload handler:
        var url = '/files/',
            uploadButton = $('<button/>')
            .addClass('btn btn-primary')
            .prop('disabled', true)
            .text('Processing...')
            .on('click', function() {
                var $this = $(this),
                    data = $this.data();
                $this
                    .off('click')
                    .text('Abort')
                    .on('click', function() {
                        $this.remove();
                        data.abort();
                    });
                data.submit().always(function() {
                    $this.remove();
                });
            });
        $('#fileupload').fileupload({
                url: url,
                dataType: 'json',
                autoUpload: false,
                acceptFileTypes: /(\.|\/)(gif|jpe?g|png)$/i,
                maxFileSize: 999000,
                // Enable image resizing, except for Android and Opera,
                // which actually support image resizing, but fail to
                // send Blob objects via XHR requests:
                disableImageResize: /Android(?!.*Chrome)|Opera/
                    .test(window.navigator.userAgent),
                previewMaxWidth: 100,
                previewMaxHeight: 100,
                previewCrop: true
            }).on('fileuploadadd', function(e, data) {
                data.context = $('<div/>').appendTo('#files');
                $.each(data.files, function(index, file) {
                    var node = $('<p/>')
                        .append($('<span/>').text(file.name));
                    if (!index) {
                        node
                            .append('<br>')
                            .append(uploadButton.clone(true).data(data));
                    }
                    node.appendTo(data.context);
                });
            }).on('fileuploadprocessalways', function(e, data) {
                var index = data.index,
                    file = data.files[index],
                    node = $(data.context.children()[index]);
                if (file.preview) {
                    node
                        .prepend('<br>')
                        .prepend(file.preview);
                }
                if (file.error) {
                    node
                        .append('<br>')
                        .append($('<span class="text-danger"/>').text(file.error));
                }
                if (index + 1 === data.files.length) {
                    data.context.find('button')
                        .text('Upload')
                        .prop('disabled', !!data.files.error);
                }
            }).on('fileuploadprogressall', function(e, data) {
                var progress = parseInt(data.loaded / data.total * 100, 10);
                $('#progress .progress-bar').css(
                    'width',
                    progress + '%'
                );
            }).on('fileuploaddone', function(e, data) {
                $.each(data.result.files, function(index, file) {
                    if (file.url) {
                        var link = $('<a>')
                            .attr('target', '_blank')
                            .prop('href', file.url);
                        $(data.context.children()[index])
                            .wrap(link);
                    } else if (file.error) {
                        var error = $('<span class="text-danger"/>').text(file.error);
                        $(data.context.children()[index])
                            .append('<br>')
                            .append(error);
                    }
                });
            }).on('fileuploadfail', function(e, data) {
                $.each(data.files, function(index) {
                    var error = $('<span class="text-danger"/>').text('File upload failed.');
                    $(data.context.children()[index])
                        .append('<br>')
                        .append(error);
                });
            }).prop('disabled', !$.support.fileInput)
            .parent().addClass($.support.fileInput ? undefined : 'disabled');
    });
</script>